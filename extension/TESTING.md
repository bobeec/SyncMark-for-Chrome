# SyncMark Chrome Extension - Testing Guide

このドキュメントでは、SyncMark Chrome拡張機能のテスト手順を説明します。

## 📦 ビルド済みパッケージ

以下のビルド済みファイルが利用可能です：
- **開発用**: `extension/build/` ディレクトリ（アンパック版）
- **配布用**: `extension/syncmark-chrome-extension-v1.0.0.zip`（Chrome Web Store用）

## 🔧 ローカルテスト手順（開発者モード）

### 1. 拡張機能をChromeに読み込む

1. **Chrome拡張機能管理ページを開く**
   ```
   chrome://extensions/
   ```
   または、Chromeメニュー → その他のツール → 拡張機能

2. **デベロッパーモードを有効にする**
   - 右上の「デベロッパーモード」トグルをONにします

3. **パッケージ化されていない拡張機能を読み込む**
   - 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
   - 以下のフォルダを選択：
     ```
     /home/user/webapp/extension/build
     ```

4. **拡張機能の確認**
   - SyncMark for Chromeアイコンが表示されることを確認
   - エラーが表示されていないことを確認

### 2. 基本機能のテスト

#### ポップアップUI
1. Chromeツールバーの **SyncMarkアイコン** をクリック
2. ポップアップウィンドウが表示されることを確認
3. 以下の機能をテスト：
   - ブックマーク一覧の表示
   - 検索機能
   - お気に入り機能
   - 言語切り替え（日本語⇔英語）

#### コンテンツスクリプト（浮遊ボタン）
1. 任意のWebページを開く
2. ページ右下に **青い浮遊ブックマークボタン** が表示されることを確認
3. ボタンをクリックして、現在のページをブックマーク保存

#### オプションページ
1. Chrome拡張機能管理ページで「詳細」をクリック
2. 「拡張機能のオプション」をクリック
3. 設定ページが表示されることを確認
4. 以下の設定をテスト：
   - APIエンドポイントの設定
   - 同期間隔の設定
   - 通知設定
   - 言語設定

#### バックグラウンド処理
1. Chromeのコンソールで以下を確認：
   ```
   chrome://extensions/ → SyncMark → 「Service Worker」をクリック
   ```
2. エラーが表示されていないことを確認
3. ブックマーク同期処理が正常に動作していることを確認

### 3. Web APIとの連携テスト

#### 前提条件
- SyncMark Webアプリが起動していること
- 開発環境URL: `https://3000-iieuh916jtoaqqegoxuy4-c81df28e.sandbox.novita.ai`

#### テスト手順
1. **ログイン**
   - Webアプリにアクセスしてログイン
   - 認証トークンが保存されることを確認

2. **ブックマーク追加**
   - Chrome拡張の浮遊ボタンから新しいブックマークを追加
   - Webアプリ側でブックマークが表示されることを確認

3. **ブックマーク同期**
   - Webアプリ側でブックマークを編集
   - Chrome拡張側に変更が反映されることを確認

4. **フォルダ管理**
   - フォルダを作成して、ブックマークを整理
   - 階層構造が正しく保存されることを確認

## 🧪 テストチェックリスト

### 基本機能
- [ ] Chrome拡張が正常にインストールされる
- [ ] アイコンが正しく表示される
- [ ] ポップアップUIが開く
- [ ] オプションページが開く
- [ ] 浮遊ボタンが表示される

### ブックマーク機能
- [ ] ブックマークの追加
- [ ] ブックマークの編集
- [ ] ブックマークの削除
- [ ] ブックマークの検索
- [ ] お気に入りの設定/解除

### フォルダ機能
- [ ] フォルダの作成
- [ ] フォルダの編集
- [ ] フォルダの削除
- [ ] 階層構造の管理
- [ ] ブックマークのフォルダ移動

### 同期機能
- [ ] Webアプリとの同期
- [ ] 自動同期（バックグラウンド）
- [ ] 手動同期ボタン
- [ ] 同期ステータスの表示
- [ ] オフライン時の動作

### UI/UX
- [ ] 日本語表示
- [ ] 英語表示
- [ ] 言語切り替え
- [ ] レスポンシブデザイン
- [ ] エラーメッセージの表示

### セキュリティ
- [ ] 認証トークンの安全な保存
- [ ] HTTPS通信
- [ ] CORS設定
- [ ] XSS対策

## 🐛 既知の問題

### 制限事項
1. **認証**: 現在はモック認証（本格的なGoogle OAuth未実装）
2. **リアルタイム同期**: 手動同期のみ（自動同期は今後実装予定）
3. **オフライン対応**: 限定的なオフライン機能

### トラブルシューティング

#### 拡張機能が読み込めない
- `extension/build/manifest.json` が存在することを確認
- manifestファイルの構文エラーをチェック
- Chromeのバージョンが最新であることを確認

#### Web APIに接続できない
- Webアプリが起動していることを確認
- CORS設定を確認（manifest.jsonのhost_permissions）
- ネットワーク接続を確認

#### ブックマークが同期されない
- 認証トークンが有効であることを確認
- Service Workerのコンソールでエラーをチェック
- ストレージ容量を確認（chrome.storage.local）

## 📝 テストレポート

テスト実施後、以下の情報を記録してください：
- テスト日時
- Chromeバージョン
- OSバージョン
- テスト結果（成功/失敗）
- 発見した問題
- スクリーンショット

## 🚀 次のステップ

テストが完了したら：
1. 発見した問題をGitHub Issuesに報告
2. Chrome Web Store公開準備
3. ユーザードキュメントの作成
4. プロモーション素材の準備

---

**テスト担当者へのお願い**：できるだけ多くのシナリオをテストして、問題を早期に発見してください！
